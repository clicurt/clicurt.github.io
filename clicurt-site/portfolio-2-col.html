<!DOCTYPE html>
<html lang="en">

<head>


</head>

<body>
<pre>
    .progress-bar {
    	border: 1px solid black;
    	background-color: #f0f0f0;
    }
    .progress-bar div {
    	background-color: red;
    	height: 1.25em;
    }

    <div class="progress-bar"><div style="width: 0"></div></div>

    function delayedLoop(collection, delay, callback, context) {
    	context = context || null;

    	var i = 0,
    	    nextInteration = function() {
    	    	if (i === collection.length) {
    	    		return;
    	    	}

    	    	callback.call(context, collection[i], i);
    	    	i++;
    	    	setTimeout(nextInteration, delay);
    		};

    	nextInteration();
    }

    var progressBar = document.querySelector(".progress-bar div"),
        items = [1,2,3,4,5,6,7,8,9,10];

    delayedLoop(items, 500, function(item, index) {
        var width = (item / items.length * 100) + "%";
    	progressBar.style.width = width;
        progressBar.innerHTML = width;
    });








    https://github.com/facebookincubator/create-react-app
    https://reactjs.org/tutorial/tutorial.html
    curl -sS https://dl.yarnpkg.com/debian/pubkey.gpg | sudo apt-key add -
    echo "deb https://dl.yarnpkg.com/debian/ stable main" | sudo tee /etc/apt/sources.list.d/yarn.list

    https://fossies.org/linux/www/flow-linux64-v0.60.1.zip/
    Fixed by:

ln -s /usr/bin/nodejs /usr/bin/node
http://www.proreactnative.com/Getting-Started-with-React-Native-on-Ubuntu-Linux/


import React from 'react';
import ReactDOM from 'react-dom';
import './index.css';

class Square extends React.Component {
  render() {
    return (
      <div className="square" onClick={() => alert('click')}>
        {this.props.value}
    </div>
    );
  }
}

class Board extends React.Component {
  renderSquare(i) {
    return <Square value={i} />;
  }

  render() {
  const picture = [
      {
          title : "Johnny",
          src : "./images/Johnny.jpg"
      },
      {
          title : "Power puff",
          src : "./images/ppg.jpg"
      },
      {
          title : "2Pac",
          src : "./images/tex.jpeg"
      },
      {
          title : "Greyhounds",
          src : "./images/ghs.jpg"
      },
      {
          title : "Ed edd and Eddy",
          src : "./images/eee.jpg",
          height: "auto"
      },
      {
          title : "Bearded man",
          src : "./../images/beard.jpeg",
          height: "auto"
      }
];
    const status = 'Next player: X';
    return (
      <div className="parent">
        <div className="main">
          {this.renderSquare(<img src={picture[0].src} />)}
        </div>
        <div className="main">
          {this.renderSquare(<img src={picture[1].src} />)}
        </div>
        <div className="main">
          {this.renderSquare(<img src={picture[2].src} />)}
        </div>
        <div className="main">
          {this.renderSquare(<img src={picture[3].src} />)}
        </div>
        <div className="main">
          {this.renderSquare(<img src={picture[4].src} />)}
        </div>
        <div className="main">
          {this.renderSquare(<img src={picture[5].src} />)}
        </div>
      </div>
    );
  }
}

class Game extends React.Component {
  render() {
    return (
      <div className="game">
        <div className="game-board">
          <Board />
        </div>
        <div className="game-info">
          <div>{/* status */}</div>
          <ol>{/* TODO */}</ol>
        </div>
      </div>
    );
  }
}

// ========================================

ReactDOM.render(
  <Game />,
  document.getElementById('root')
);



=========================================
CSS
body {
  font: 14px "Century Gothic", Futura, sans-serif;
  margin: 20px;
}

ol, ul {
  padding-left: 30px;
}

.board-row:after {
  clear: both;
  content: "";
  display: table;
}

div.main {
    background-color: lightgrey;
    width: 80px;
    height: 80px;
    border: 1px solid black;
    padding: 10px;
    margin: 10px;
    display: inline-block;
}

div.parent {
    background-color: pink;
    width: 740px;
    height: 120px;
    border: 1px solid black;
    padding: 10px;
    margin: 25px;
}

img {
    max-width: 100%;
    max-height: 390px;
    top: 5%;
    left: 5%;
}






sudo npm install -g n
sudo n latest






    for (var i=0; i< all[0].length; i++) {
    	if(valueA.length != 0) {
    		if(all[0][i] === valueA[0] ) {
        	swap(all[0], i, 0);
        }
    	}
      if(valueB.length != 0) {
      	if(all[1][i] === valueB[0] ) {
        	swap(all[1], i, 0);
        }
      }


    public static void listSize() {
           List<String> testL = new ArrayList<>(Arrays.asList("name1", "name4", "name7"));
           int listS = testL.size();
           int newSize = 0;
           List<String> idList = new ArrayList<>(Arrays.asList("name3"));
           List<Integer> numList = new ArrayList<>();
           int number = 0;
           for(String id : idList) {
               number = Integer.parseInt(id.substring(id.length() - 1));
               numList.add(number);
           }
           for(Integer num : numList) {
               if(num == listS) {
                   newSize = listS;
               } else {
                   newSize = num;
               }
           }

           LOGGER.log(Level.INFO, "name" + newSize);
           LOGGER.log(Level.INFO, "numList" + numList);

       }

public class Names {
    private static final Logger LOGGER = Logger.getLogger(Names.class.getName());
    public static void typeOne(String str) {
        Integer increament = Integer.valueOf(str.substring(str.length() - 1)) + 1;
        LOGGER.log(Level.INFO, () -> str.replace(str.substring(str.length() - 1), String.valueOf(increament)));
    }

    public static void typeTwo(String str) {
        String index = str.substring(str.indexOf('_') - 1, str.indexOf('_'));
        Integer increament = Integer.valueOf(index) + 1;
        LOGGER.log(Level.INFO, () -> str.replace(str.substring(str.indexOf('_') - 1, str.indexOf('_')), String.valueOf(increament)));
    }

    public static void main(String[] args) {
        String prevVtx = "measurementStep";
        String str = "23_5";
        if("measurementStep".equals(prevVtx)) {
            Names.typeOne(str);
        } else {
            Names.typeTwo(str);
        }
    }
}



    addSlot = $.grep(slotIds, function(e, i) {
      		return (e.indexOf(addId) == 0);
      });
      console.log("Add", addSlot);
      removeSlot = $.grep(slotIds, function(e, i) {
      		return (e.indexOf(addId) != 0);
      });
      console.log("Remove", removeSlot);


<script type="text/javascript">

        $(function() {
            $.get("@routes.HomeController.getGridData", function(data, status){
                showGrid(data);
                console.log("Data: " + data );
            });
        });

        var grid = $('#list4');
        var initRaty = function(rowid) {
            var rating = grid.getCell(rowid, 8); // the Ranking column has the index 4
            // because we use rownumbers:true the index of the Ranking column will be 1 higher
            $('#' + rowid +'> td:nth-child(9) > div').raty({
                path:'@routes.Assets.versioned("images/raty/")',
                start:rating,
                readOnly:true
            });
        };
        var lastSel;
        var params = {};
        params.comment = 'loaf';
        var editparameters = {
                keys : true,
                oneditfunc : function(){
                    console.log("start edit");
                },
                successfunc : function(xhr){
                    console.log(xhr.responseText);
                },
                url : "@routes.HomeController.receiveDataDB",
                extraparam : params,
                restoreAfterError : true
            }

        var saveparameters = {
                successfunc : function(xhr){
                    console.log(xhr.responseText);
                },
                url : "@routes.HomeController.receiveDataDB",
                extraparam : params,
                aftersavefunc : function(){
                    console.log('saved');
                },
                errorfunc: null,
                afterrestorefunc : null,
                restoreAfterError : true
            }
        var mydata = [
                {id:"1",invdate:"2007-10-01",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00", rating:"4"},
                {id:"2",invdate:"2007-10-02",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00", rating:"4"},
                {id:"3",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00", rating:"3"},
                {id:"4",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00", rating:"2"},
                {id:"5",invdate:"2007-10-05",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00", rating:"4"},
                {id:"6",invdate:"2007-09-06",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00", rating:"5"},
                {id:"7",invdate:"2007-10-04",name:"test",note:"note",amount:"200.00",tax:"10.00",total:"210.00", rating:"4"},
                {id:"8",invdate:"2007-10-03",name:"test2",note:"note2",amount:"300.00",tax:"20.00",total:"320.00", rating:"4"},
                {id:"9",invdate:"2007-09-01",name:"test3",note:"note3",amount:"400.00",tax:"30.00",total:"430.00", rating:"4"}
        ],
        myDelOptions = {
            // because I use "local" data I don't want to send the changes to the server
            // so I use "processing:true" setting and delete the row manually in onclickSubmit
            onclickSubmit: function (rp_ge, rowid) {
                // reset the value of processing option to true to
                // skip the ajax request to 'clientArray'.
                rp_ge.processing = true;

                // we can use onclickSubmit function as "onclick" on "Delete" button
                // delete row
                var grid = $('#list4');
                grid.jqGrid('delRowData', rowid);
                $("#delmod" + grid[0].id).hide();

                if (grid[0].p.lastpage > 1) {
                    // reload grid to make the row from the next page visable.
                    // TODO: deleting the last row from the last page which number is higher as 1
                    grid.trigger("reloadGrid", [{ page: grid[0].p.page}]);
                }

                return true;
            },
            processing: true
        },
        myEditOptions = {
            // because I use "local" data I don't want to send the changes to the server
            // so I use "processing:true" setting and delete the row manually in onclickSubmit
            onclickSubmit: function (rp_ge, rowid) {
            //     // reset the value of processing option to true to
            //     // skip the ajax request to 'clientArray'.
                rp_ge.processing = true;
            //
            //     // we can use onclickSubmit function as "onclick" on "Delete" button
            //     // delete row
                // var $self = $('#list4');
                var grid = $('#list4');
                grid.jqGrid("saveRow", rowid, saveparameters);
                // var $self = $('#list4'),
            //     // savedRows array is not empty if some row is in inline editing mode
                // savedRows = $self.jqGrid("getGridParam", "savedRow");
                // if (savedRows.length > 0) {
                //     $self.jqGrid("restoreRow", savedRows[0].id);
                // }
                // $self.jqGrid("editRow", rowid, editparameters);
                console.log('Used');

                return true;
            },
            processing: true
        };
        // function SaveStudentEvaluation(index) {
        //     saveparameters = {
        //         "successfunc": null,
        //         "url": null,
        //         "extraparam": {},
        //         "aftersavefunc": null,
        //         "errorfunc": null,
        //         "afterrestorefunc": null,
        //         "restoreAfterError": true,
        //         "mtype": "POST"
        //       }
        // }

        // var orgRowActions = $.fn.fmatter.rowactions;
        //    $.fn.fmatter.rowactions = function (e, act) {
        //        var $grid = $(this).closest("table.ui-jqgrid-btable"),
        //            rowid = $(this).closest("tr.jqgrow").attr("id");
        //        if (act === "edit") {
        //            $grid.jqGrid("viewGridRow", rowid);
        //         //    $grid.jqGrid('editRow', rowid, editparameters);
        //            return false;
        //        }
        //        return orgRowActions.call(this, e, act);
        //    }
        function showGrid() {
            var postData = {};
            postData.time = "travel";
            postData.ring = "loard";
            jQuery("#list4").jqGrid({
                datatype: "local",
                pager: "#jqGridPager",
                height: 250,
                colNames:['Inv No','Date', 'Client', 'Amount','Tax','Total','Notes', 'Rating', 'Actions'],
                colModel:[
                    {name:'id',index:'id', width:60, sorttype:"int", editable:true},
                    {name:'invdate',index:'invdate', width:90, sorttype:"date", editable:true},
                    {name:'name',index:'name', width:100, editable:true},
                    {name:'amount',index:'amount', width:80, align:"right",sorttype:"float", editable:true},
                    {name:'tax',index:'tax', width:80, align:"right",sorttype:"float", editable:true},
                    {name:'total',index:'total', width:80,align:"right",sorttype:"float", editable:true},
                    {name:'note',index:'note', width:150, sortable:false, editable:true},
                    {name:'rating',index:'rating', width:150, sortable:false, editable:true, title: false,
                        formatter: function(cellvalue, options, rowObject) {
                            // insert div needed for the raty plugin
                            // and insert a hidden span with the rating value
                            return '<div></div><span style="display: none;">'+cellvalue+'</span>';
                        }, unformat: function (cellvalue, options, cellobject) {
                            // get rating value from the hidden span
                            return cellobject.find("span").text();
                        }, edittype:'custom',
                        editoptions: {
                            custom_element: function(value, options) {
                                var val = $(value);
                                var elem = $('<div id="'+options.id+'"/>');
                                setTimeout(function(){
                                    elem.raty({
                                        path:'@routes.Assets.versioned("images/raty/")',
                                        start:(val.length>1? val[1].innerText: value)
                                    });
                                }, 100);
                                return elem[0];
                            },
                            custom_value: function(elem) {
                                return elem.find("input").val();
                            }
                        }
                  },
                 {name:'act',index:'act', width:75,sortable:false, formatter: buttonFormat
//                        formatoptions : {
//                            keys : true,
//                            delOptions : myEditOptions,
//                            // editOptions : this.beforeSubmitCell,
//                            editbutton : true,
//                            delbutton : true
//                        },
                 }
                ],
                viewrecords: true,
                loadComplete: function() {
                    var ids = grid.getDataIDs();
                    for(var i=0;i<ids.length;i++){
                        initRaty(ids[i]);
                    }
                },
                // ajaxRowOptions: { contentType: "application/json", dataType: "json" },
                // serializeRowData: function (data) { return JSON.stringify(data); },
                caption: "Manipulating Array Data",
                onSelectRow: function(id){
//                    var $self = $(this),
//                    // savedRows array is not empty if some row is in inline editing mode
//                    savedRows = $self.jqGrid("getGridParam", "savedRow");
//                    if (savedRows.length > 0) {
//                        $self.jqGrid("restoreRow", savedRows[0].id);
//                    }
//                    $self.jqGrid("editRow", rowid, editparameters);
                    if (id && id !== lastSel) {
                        // cancel editing of the previous selected row if it was in editing state.
                        // jqGrid hold intern savedRow array inside of jqGrid object,
                        // so it is safe to call restoreRow method with any id parameter
                        // if jqGrid not in editing state
                        if (typeof lastSel !== "undefined") {
                            grid.jqGrid('restoreRow',lastSel);
                            var cell = $('#' + lastSel +'> td:nth-child(5)');
                            var spans = cell.find('span');
                            if (spans.length > 1 ) {
                                // if the lastSel row was not only selected, but also
                                // was in editing mode, get the hidden text with the ranking
                                var rating = cell.find('span')[1].innerText;
                                cell.find('div').raty({
                                    path:'@routes.Assets.versioned("images/raty/")',
                                    start:rating,
                                    readOnly:true
                                });
                            }
                        }
                        lastSel = id;
                    }
                },
                rownumbers : true,
                gridComplete: function(){
                },
                editurl: "@routes.HomeController.receiveDataDB",
                // cellEdit : true,
                // cellsubmit : 'remote',
                // cellurl : '@routes.HomeController.receiveDataDB',
                // beforeSubmitCell : function(rowid,celname,value,iRow,iCol) {
                //   if( rowid == 1 ) {
                //     return {comment:"value1"}
                //   } else{
                //     return {}
                //   }
                // }
            });
            for(var i=0;i<=mydata.length;i++) {
                $("#list4").jqGrid('addRowData',i+1,mydata[i]);
            }
            $.extend(true, $.jgrid.inlineEdit, {
                beforeSaveRow: function (option, rowId) {
                    option.oneditfunc = function(){
                        console.log("start edit");
                    },
                    option.successfunc = function(xhr){
                        console.log(xhr.responseText);
                    },
                    option.url = "@routes.HomeController.receiveDataDB",
                    option.extraparam = params,
                    option.restoreAfterError = true
                }
            });
     }

        function buttonFormat( cellvalue, options, rowObject ){
            be = "<input style='height:22px;width:20px;' type='button' value='E' onclick=\"jQuery('#list4').jqGrid('editRow', '"+options.rowId+"');\"  />";
            se = "<input style='height:22px;width:20px;' type='button' id='saveId' value='S' onclick=\"jQuery('#list4').jqGrid('saveRow', '"+options.rowId+"');\"/>";
            ce = "<input style='height:22px;width:20px;' type='button' value='C' onclick=\"jQuery('#list4').restoreRow('"+options.rowId+"');\" />";
            return be + se + ce;
        }

    </script>

    <div>
        <input type="button" onclick="location.href='@routes.CountController.testGrid';" value="test grid page" />
    </div>
    <div style="margin-top:20px;">
        <table id="list4"></table>
    </div>
}






31-07-17

public static void processUploadedFile(FilePart<File> file, MultipartFormData<File> body) {
        file = body.getFile("file");
        String fileName = "";
        if (file == null) {
            Logger.info("error", "Missing file");
        }
        else {
            fileName = file.getFilename();
            final String FILE_NAME = FilenameUtils.getBaseName(fileName);
            final String FILE_EXT = FilenameUtils.getExtension(fileName);
            final char POINT = FilenameUtils.EXTENSION_SEPARATOR;

            String[] baseName = fileName.split("\\.(?=[^\\.]+$)");
            String contentType = file.getContentType();
            File inputFile = (File) file.getFile();
            Logger.info("This is inputStream {}:", inputFile.toPath());
            String fullPath = Configuration.root().getString("UPLOAD_PATH");

            if (!contentType.isEmpty()) {
                try {
                    String encodedString = URLEncoder.encode(baseName[0], "UTF-8");
                    String repEncoded = encodedString.replace("+", "_");
                    File modDir = new File(fullPath + repEncoded + "." + baseName[1]);
                    InputStream inputStream;
                    inputStream = new FileInputStream(inputFile.getAbsolutePath());
                    String srcEncode = getBom(inputStream).replace("ByteOrderMark[UTF-8: 0xEF,0xBB,0xBF]", "UTF-8");
                    Logger.info("srcEncode {} ", srcEncode);
                    inputStream.close();
                    if(FILE_EXT.equalsIgnoreCase("csv")) {
                        if (srcEncode.contains("UTF-8")) {
                            File outDir = new File(fullPath +"/tmp/"+ FILE_NAME + POINT + FILE_EXT);
                            Logger.info("outDir {} ", outDir);
                            Paths.get(fullPath, "/tmp/").toFile().mkdirs();
                            String prefix = "temp";
                            String suffix = ".tmp";
                            File tempFile = File.createTempFile(prefix, suffix);
                            Logger.info("tempFile {}: ", tempFile);
                            transform(inputFile, srcEncode, outDir, "SHIFT-JIS", tempFile);
                            try( BufferedReader in = new BufferedReader(new InputStreamReader(new FileInputStream(tempFile), "SHIFT-JIS"));
                                    BufferedWriter bw = new BufferedWriter(
                                            new OutputStreamWriter(new FileOutputStream(outDir), "SHIFT-JIS"));){
                                int read;
                                while ((read = in.read()) != -1) {
                                    char asChar = (char) read;
                                    if (asChar != '?') {
                                      bw.write(asChar);
                                    }
                                  }
                            }
                        }
                    } else {
                        File newdir = new File(fullPath + FILE_NAME + POINT + FILE_EXT);
                        Logger.info("Directory newdir {}: ", newdir.toPath());
                        newdir.mkdirs();
                        Files.copy(inputFile.toPath(), newdir.toPath(), StandardCopyOption.REPLACE_EXISTING);
                        PdfConvertor.convert(newdir);
                    }
                    Logger.info("inputStream toPath {}: ", inputFile.toPath());
                    modDir.mkdirs();
                    Files.copy(inputFile.toPath(), modDir.toPath(), StandardCopyOption.REPLACE_EXISTING);
                }
                catch (Exception e) {
                    throw new IllegalStateException(e);
                }
            }
        }
    }

    public static void transform(File source, String srcEncoding, File destination, String tgtEncoding, File tempFile) throws IOException {
        try (BufferedReader br = new BufferedReader(new InputStreamReader(new FileInputStream(source), srcEncoding));
                BufferedWriter bw = new BufferedWriter(
                        new OutputStreamWriter(new FileOutputStream(destination), tgtEncoding));
                BufferedWriter tempBw = new BufferedWriter(
                        new OutputStreamWriter(new FileOutputStream(tempFile), tgtEncoding));
                BufferedReader brJIS = new BufferedReader(new InputStreamReader(new FileInputStream(tempFile), tgtEncoding));) {
            char[] buffer = new char[16384];
            int read;
            while ((read = br.read(buffer)) != -1) {
                tempBw.write(buffer, 0, read);
            }
        }
    }

    public static String getBom(InputStream inputStream) throws IOException {
        BOMInputStream bis = new BOMInputStream(inputStream);
        String temp = "";
        if (bis.hasBOM()) {
            temp = bis.getBOM().toString();
        }

        String encodeString = temp;
        bis.close();
        Logger.info("encodeString {} ", encodeString);
        return encodeString;
    }
*****************************************************************************













try {

    String encodedString = URLEncoder.encode(baseName[0], "UTF-8");
    String repEncoded = encodedString.replace("+", "_");
    File modDir = new File(fullPath + repEncoded + "." + baseName[1]);


//                    PdfConvertor.convert(newdir);
    InputStream inputStream;
    OutputStream outputStream;

    if(FILE_EXT.equalsIgnoreCase("csv")) {
        File outDir = new File(fullPath + "/tmp/" + FILE_NAME + POINT + FILE_EXT);
        inputStream = new FileInputStream(inputFile.getAbsolutePath());
        outputStream = new FileOutputStream(outDir.getAbsolutePath());
        FileModel.removeBom(inputStream);


        int read = 0;
        byte[] bytes = new byte[1024];
        while ((read = inputStream.read(bytes)) != -1) {
            outputStream.write(bytes, 0, read);
        }
        inputStream.close();
        outputStream.close();
//                        FileModel.transform(endir, "UTF-8", ekndir, "SHIFT-JIS");
    } else {
        File newdir = new File(fullPath + FILE_NAME + POINT + FILE_EXT);
        Logger.info("Directory newdir {}: ", newdir.toPath());
        newdir.mkdirs();
        Files.copy(inputFile.toPath(), newdir.toPath(), StandardCopyOption.REPLACE_EXISTING);
        Files.delete(newdir.toPath());
        PdfConvertor.convert(newdir);
    }
    Logger.info("inputStream toPath {}: ", inputFile.toPath());
    Files.copy(inputFile.toPath(), modDir.toPath(), StandardCopyOption.REPLACE_EXISTING);
}
catch (Exception e) {
    throw new IllegalStateException(e);
                }






package controllers;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.net.URLEncoder;
import java.nio.file.Files;
import java.nio.file.StandardCopyOption;
import java.util.Map;

import org.apache.commons.io.FilenameUtils;
import org.jodconverter.office.OfficeException;

import com.fasterxml.jackson.databind.JsonNode;

import models.FileModel;
import models.PdfConvertor;
import play.Configuration;
import play.Logger;
import play.libs.Json;
import play.mvc.Controller;
import play.mvc.Http.MultipartFormData;
import play.mvc.Http.MultipartFormData.FilePart;
import play.mvc.Result;

/**
 * This controller contains an action to handle HTTP requests to the
 * application's home page.
 */
public class HomeController extends Controller {

    /**
     * An action that renders an HTML page with a welcome message. The
     * configuration in the <code>routes</code> file means that this method will
     * be called when the application receives a <code>GET</code> request with a
     * path of <code>/</code>.
     */
    public Result index() {
        return ok(views.html.index.render("Welcome"));
    }

    public Result receiveData() {
        JsonNode json = request().body().asJson().get("id");
        return ok(json);
    }

    public Result upload() throws IOException{

        MultipartFormData<File> body = request().body().asMultipartFormData();
        if (body == null) {
            return badRequest("Invalid request");
        }

        FilePart<File> file = body.getFile("file");
        String fileName = "";
        if (file == null) {
            flash("error", "Missing file");
            return badRequest();
        }
        else {
            fileName = file.getFilename();
            String[] baseName = fileName.split("\\.(?=[^\\.]+$)");
            String contentType = file.getContentType();
            File inputStream = (File) file.getFile();
            Logger.info("This is inputStream {}:", inputStream.toPath());
            String fullPath = Configuration.root().getString("UPLOAD_PATH");

            if (!contentType.isEmpty()) {
                try {
                    File newdir = new File(fullPath + FilenameUtils.getBaseName(fileName)
                            + FilenameUtils.EXTENSION_SEPARATOR + FilenameUtils.getExtension(fileName));
                    Logger.info("Directory newdir {}: ", newdir.toPath());
                    String encodedString = URLEncoder.encode(baseName[0], "UTF-8");
                    String repEncoded = encodedString.replace("+", "_");
                    File modDir = new File(fullPath + repEncoded + "." + baseName[1]);

                    newdir.mkdirs();
                    File endir = new File(fullPath + "/temp/"+ FilenameUtils.getBaseName(fileName)
                    + FilenameUtils.EXTENSION_SEPARATOR + FilenameUtils.getExtension(fileName));
                    Files.copy(inputStream.toPath(), newdir.toPath(), StandardCopyOption.REPLACE_EXISTING);
                    File ekndir = new File(fullPath + "/tmp/"+ FilenameUtils.getBaseName(fileName)
                    + FilenameUtils.EXTENSION_SEPARATOR + FilenameUtils.getExtension(fileName));
//                    PdfConvertor.convert(newdir);
                    InputStream is = new FileInputStream(newdir.getAbsolutePath());
                    Logger.info("Directory name {}: ", newdir.getName());
                    OutputStream outputStream = new FileOutputStream(endir.getAbsolutePath());
                    if(FilenameUtils.getExtension(fileName).equalsIgnoreCase("csv")) {
                        FileModel.removeBom(is);
                        int read = 0;
                        byte[] bytes = new byte[1024];
                        while ((read = is.read(bytes)) != -1) {
                            outputStream.write(bytes, 0, read);
                        }
                        outputStream.close();
//                        FileModel.transform(endir, "UTF-8", ekndir, "SHIFT-JIS");
                    }
                    PdfConvertor.convert(endir);
                    Logger.info("inputStream toPath {}: ", inputStream.toPath());
                    Logger.info("endir.getName() {}: ", endir.getAbsolutePath());
                    Logger.info("inputStream toPath {}: ", inputStream.toPath());
                    Files.copy(inputStream.toPath(), modDir.toPath(), StandardCopyOption.REPLACE_EXISTING);
                }
                catch (Exception e) {
                    throw new IllegalStateException(e);
                }
            }
        }

        return ok(Json.toJson("File " + fileName + " uploaded"));
    }

    public Result receiveDataDB() {
        Map<String, String[]> params = request().body().asFormUrlEncoded();
        String name = params.get("name")[0].toString();
        String comment = params.get("comment")[0].toString();

        return ok(Json.toJson("success: " + name + " " + comment));
    }

    public Result convert() throws OfficeException, InterruptedException {
//       if(!PdfConvertor.convert()) {
//           return badRequest("Failed");
//       }
        return ok(Json.toJson("Success"));
    }

//    public static Result getImage(Long id) {
//        Entity entity = Entity.find.byId(id);
//        InputStream input = null;
//
//        if (entity.getImage() != null) {
//            input = new ByteArrayInputStream(entity.getImage());
//        } else {
//            try {
//                byte[] byteArray;
//                File file = Play.getFile("/public/images/no_photo.jpg", Play.current());
//                byteArray = IOUtils.toByteArray(new FileInputStream(file));
//                input = new ByteArrayInputStream(byteArray);
//            } catch (Exception e) {
//
//            }
//        }
//
//        return ok(input).as("image/jpeg");
//    }

}






import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.util.HashMap;
import java.util.Map;

import org.apache.commons.io.input.BOMInputStream;

public class FileModel {

    public static void getAll(){
        Map<String, Object> map = new HashMap<String, Object>();
        map.put("name", "mkyong");
        map.put("age", 29);
    }

    public static Map<Integer, String>  map() {
        Map<Integer, String> productMap = new  HashMap<>();
        productMap.put(1, "Keyboard");
        productMap.put(2, "Mouse");
        productMap.put(3, "Monitor");
        return productMap;
    }

    public static void transform(File source, String srcEncoding, File target, String tgtEncoding) throws IOException {
        BufferedReader br = null;
        BufferedWriter bw = null;
        try{
            br = new BufferedReader(new InputStreamReader(new FileInputStream(source),srcEncoding));
            bw = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(target), tgtEncoding));
            char[] buffer = new char[16384];
            int read;
            while ((read = br.read(buffer)) != -1)
                bw.write(buffer, 0, read);
        } finally {
            try {
                if (br != null)
                    br.close();
            } finally {
                if (bw != null)
                    bw.close();
            }
        }
    }

    public static void removeBom(InputStream inputStream) throws IOException {
        @SuppressWarnings("resource")
        BOMInputStream bis = new BOMInputStream(inputStream);
        if (bis.hasBOM()) {
            bis.skip(bis.getBOM().length()-3);
        }
    }


 public synchronized static boolean convert(File uploadedFile) throws OfficeException, InterruptedException {
        Runnable conversion = new Runnable() {
            @Override
            public void run() {
                // 1) Start LibreOffice in headless mode.
                DefaultOfficeManagerBuilder configuration = new DefaultOfficeManagerBuilder()
                        .setOfficeHome(new File(Configuration.root().getString("OFFICE_HOME")))
                        .setProcessManager(new PureJavaProcessManager())
                        .setTaskExecutionTimeout(300000L);
                OfficeManager officeManager = configuration.build();
                try {
                    officeManager.start();

                    // 2) Create JODConverter converter
                    OfficeDocumentConverter converter = new OfficeDocumentConverter(officeManager);

                    // 3) Create PDF
                    createPDF(converter, uploadedFile);
                }
                catch (OfficeException e) {
                    Logger.info("Office manager cannot start");
                }
                finally {
                    // 4) Stop LibreOffice in headless mode.
                    if (officeManager != null) {
                        try {
                            officeManager.stop();
                        }
                        catch (OfficeException e) {
                            Logger.info("Error! office manager malfunction");
                        }
                    }
                }
            }
        };
        ExecutorService executor = Executors.newCachedThreadPool();
        executor.submit(conversion);
        Logger.info("Thread submitted ..:" + executor);
        executor.shutdown();
        Logger.info("State:  {} ", executor.isShutdown());
        executor.awaitTermination(5L, TimeUnit.NANOSECONDS);
        Logger.info("Running in background...:" + executor);
        return true;
    }
































































function arrayKeys() {
          var array1 = ["12_1","12_2","12_3","12_4"];
          var array2 = ["Step1","Step2","Step3","Step4"];
          var array3 = [];

          array1.forEach(function (key,i) {
              array3[key] = array2[i];
          });
          console.log("array one :", array1);
          console.log("array two :", array2);
          console.log("array three :", array3);
          console.log("array three :", array3["12_3"]);
    }


function arrayKeys() {
          var array1 = ["12_1","12_2","12_3","12_4"];
          var array2 = ["Step1","Step2","Step3","Step4"];
          var array3 = [];
          var k= 0;
          for(var key in array2) {
              key = array1[key];
              console.log("key " + key + " has value " + array2[k]);
              array3[key] = array2[k];
              k++;

          }
          console.log("array one :", array1);
          console.log("array two :", array2);
          console.log("array three :", array3);
    }




	function arrayManupulation() {
            var temp = [];
            var a = ['foo', 'bar', 'baz'];
            for(var i in a) {
                if(i > 1){
                    a.splice(i);
                }
            }
            var cString = JSONToCSVConvertor(array);
            arrCString = [];
            arrCString = cString.split('\n');
            var found = false;
            $.each(arrCString, function(i, val) {
                if (val.indexOf("Honda") >= 0 && i > 1) {
                    arrCString.splice(i, 2);
                    found = true;
                    return false;
                }
            });
            $('#arrayManu').val(arrCString);
        }





https://jsfiddle.net/56hs2nmn/
https://stackoverflow.com/questions/32418988/not-able-to-sort-entries-in-textarea-basis-on-key-and-value-both-using-javascrip

    document.getElementById('sortbykey').onclick = sortByKey;
    document.getElementById('sortbyvalue').onclick = sortByValue;
*****************************************************************************
    <div>
        <button type="button" id='sortbykey' onclick='sortByKey()'>Sort by name</button>
        <button type="button" id='sortbyvalue' onclick='sortByValue()'>Sort by value</button>
    </div>
*****************************************************************************
    function sortByKey() {
        var textarea = document.getElementById("ans");
    	textarea.value = textarea.value.split("\n").sort(function(a, b){
            if(a != "" && b != ""){
                return a.split(':')[0].localeCompare(b.split(':')[0])
            } else {
                return 0
            }
        }).join("\n");
    }


    function sortByValue() {
        var textarea = document.getElementById("ans");
    	textarea.value = textarea.value.split("\n").sort(function(a, b){
            if(a != "" && b != ""){
                return a.split(':')[1].localeCompare(b.split(':')[1])
            } else {
                return 0
            }
        }).join("\n");
    }


*****************************************************************************
    $('button#copyTXT').click(function(){
        var txt = $('#txt').val();
        if(!txt || txt == '') {
            return;
        }
       copyTextToClipboard(JSONToCSVConvertor(data));
        $('textarea').val('').focus();
    });

    function JSONToCSVConvertor(JSONData) {
        //If JSONData is not an object then JSON.parse will parse the JSON string in an Object
        var arrData = typeof JSONData != 'object' ? JSON.parse(JSONData) : JSONData;
        var CSV = '';
        //Set Report title in first row or line
        //This condition will generate the Label/Header
            var row = "";
            //This loop will extract the label from 1st index of on array
            for (var index in arrData[0]) {
                //Now convert each value to string and comma-seprated
                row += index + '\t';
            }
            row = row.slice(0, -1);
            //append Label row with line break
            CSV += row + '\r\n';
        //1st loop is to extract each row
        for (var i = 0; i < arrData.length; i++) {
            var row = "";
            //2nd loop will extract each column and convert it in string comma-seprated
            for (var index in arrData[i]) {
                row += '"' + arrData[i][index] + '"\t';
            }
            row.slice(0, row.length - 1);
            //add a line break after each row
            CSV += row + '\r\n';
        }
        if (CSV == '') {
            alert("Invalid data");
            return;
        }
        // copyTextToClipboard(CSV);
        //Generate a file name
        return CSV;
    }

    function copyTextToClipboard(text) {
          var textArea = document.createElement("textarea");
          textArea.value = text;
          document.body.appendChild(textArea);
          textArea.select();
          try {
            var successful = document.execCommand('copy');
            var msg = successful ? 'successful' : 'unsuccessful';
            console.log('Copying text command was ' + msg);
          } catch (err) {
            console.log('Oops, unable to copy');
          }
          document.body.removeChild(textArea);
    }


    <div class="wrap">
        <input type="text" placeholder="Write some text you want to copy" />
        <button id="copyTXT">Copy my text</button>
        <br>
        <br>

        <textarea style="display:none;" ></textarea>
    </div>
</pre>

<div><xmp>

    function arrayKeys() {
          var array1 = ["12_1","12_2","12_3","12_4"];
          var array2 = ["Step1","Step2","Step3","Step4"];
          var array3 = [];
          var k= 0;
          for(var key in array2) {
              key = array1[key];
              console.log("key " + key + " has value " + array2[k]);
              array3[key] = array2[k];
              k++;

          }
          console.log("array one :", array1);
          console.log("array two :", array2);
          console.log("array three :", array3);
    }


@*
 * This template takes a single argument, a String containing a
 * message to display.
 *@

@(name: String, what: String, age: Int)
@import helper._
@*
 * Call the `main` template with two arguments. The first
 * argument is a `String` with the title of the page, the second
 * argument is an `Html` object containing the body of the page.
 *@


		@main("Welcome to Play") {

		    @*
		     * Get an `Html` object by calling the built-in Play welcome
		     * template and passing a `String` message.
		     *@
             <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
         	<script type="text/javascript">


     		//$('#submit').click(function(){
     		function sendData(){
                 var d = { id: "32" };
     	        $.ajax({
     	            type :  "POST",
     	            dataType: 'json',
     	            processData: false,
     	            contentType: "application/json; charset=utf-8",
     	            data: JSON.stringify(d),
     	            url  :  "@routes.HomeController.upload()",
     	                success: function(data){
     	                    console.log(data);
     	                }
     	        });
         	}

             function childOpen() {

             }
     /*
         	function createTest_Button() {
     	        var buttonDef = {
     	        	label : "my button",
     	        	eventClickFunc: function(e, data) {
     	   				console.log('I am clicked');
     	        	}
     	        },
     //	        return new Button('my_button', buttonDef);
             }

     		function receiveData(){
     	        $.ajax({
     	            type :  "POST",
     	            dataType: 'json',
     	            processData: false,

     	            contentType: "application/json; charset=utf-8",
     	            data: JSON.stringify(d),
     	            url  :  "@routes.HomeController.receiveData()",
     	                success: function(data){
     	                    console.log(data);
     	                }
     	        });
         	}
     */
     		function receiveDataDB(){
     			datas = {'name': "great",	'comment': "times"};
     	        $.ajax({
     	            type :  "POST",
     	            dataType: 'json',
     	            contentType: "application/json; charset=utf-8",
     	            data: JSON.stringify(datas),
     	            url  :  "@routes.HomeController.receiveDataDB()",
                     success: function(data){
                     	console.log(data);
                     },
                     error: function (xhr, ajaxOptions, thrownError) {
                         console.log(xhr.responseText);
                     }
     	        });
         	}
     		//});
             /**/
     		var count = 1;
     		function prevButton(){
     		    var prevSrc = $("#slide").attr("src").replace("1", count);
                 while (count < 4){
                     count++;
                 }
                 if (count == 4){
                     count = 1;
                 }
                 $("#slide").attr("src", prevSrc);
             }

             function nextButton(){
                 var newSrc = $("#slide").attr("src").replace("1", count);
                 while (count !== 0){
                     count = count - 1;
                 }
                 if (count == 0){
                     count = 3;
                 }
                 $("#slide").attr("src", newSrc);
             }

             function progressBarSim(al) {
                 var percent = (event.loaded / event.total) * 100;
                 console.log("percent :" , percent);
                 var bar = $('#progressBar');
                 var status = $('#status');
                 status.html(al + "%");
                 bar.val(al);
                 al++;
                 var sim = setTimeout("progressBarSim(" + al + ")", 300);
                 if(al === 100) {
                     status.html("100%");
                     bar.val(100);
                     clearTimeout(sim);
                     $('#finalMsg').html("Completed!");
                 }
             }

             function progressHandler(event) {
                 $('#loaded_n_total').html('uploaded ' + event.loaded + ' bytes of ' + event.total)
                 var percent = (event.loaded / event.total) * 100;
                 console.log("percent :" , percent);
                 $('#progressBar').val(Math.round(percent));
                 $('#status').html(Math.round(percent) + '% uploaded...please wait')
             }

             function completeHandler(event) {
                 $('#status').html(event.target.responseText);
                 $('#progressBar').val(0);
             }

             function errorHandler(event) {
                 $('#status').html("upload Failed");
             }

             function abortHandler(event) {
                 $('#status').html("upload Aborted");
             }

             var amountLoaded = 0;

            //  $(function(){
            function upload() {
                //  $('#submission').on('click', function(){

                    //  e.preventDefault();
                     // var d = { id: "32" };
                     var loading;
         	        $.ajax({
                        xhr : function() {
                            var xhr = new window.XMLHttpRequest();
                            xhr.upload.addEventListener('progress', function(e) {
                                if(e.lengthComputable) {
                                    console.log('Bytes Loaded: ' + e.loaded);
                                    console.log('Total size: ' + e.total);
                                    console.log('Percentage Uploaded: ' + e.loaded / e.total);
                                }
                            });
                            return xhr;
                        },
         	            type :  "POST",
         	            dataType: 'json',
         	            processData: false,
         	            contentType: false,
         	            // data: JSON.stringify(d),
         	            url  :  "@routes.HomeController.upload()",
                         beforeSend: function(jqXHR, options) {
                             progressBarSim(xhr);
                             console.log("percent :" , jqXHR);
                             alert('checking');
                            //  progressHandler();
                         },
     	                success: function(data){
                            console.log("file uploaded " + data);
     	                }
         	        });
    //                var file = $("#file").files[0];
	// // alert(file.name+" | "+file.size+" | "+file.type);
    //             	var formdata = new FormData();
    //             	formdata.append("file", file);
                	// var ajax = new XMLHttpRequest();
                	// ajax.upload.addEventListener("progress", progressHandler, false);
                	// ajax.addEventListener("load", completeHandler, false);
                	// ajax.addEventListener("error", errorHandler, false);
                	// ajax.addEventListener("abort", abortHandler, false);
                	// ajax.open("POST", "@routes.HomeController.upload()");
                	// ajax.send(formdata);
}
                //  });
            //  });

     		</script>

		    <h1>Hello</h1>
		    <div style="margin-bottom:20px;">
		    Hello <b>@name</b> you are learning <b>@what</b> at <b>@age</b> years
		    </div>
		    @form(action = routes.HomeController.upload, 'enctype -> "multipart/form-data") {

		    <input id="file" type="file" name="file" >
			    <p>
			        <input type="submit" id="submission" name="submit" value="Press to upload file" onclick="upload()"/>
			    </p>
			}
			<input id="submit" onclick="window.open('count', 'child', width='400', height='200');" type="button" name="sendData" value ="Open child"/>
			<br>
			<input id="submit" onclick="receiveDataDB();" type="button" name="receive" value ="receive data db"/>
            <div>
                <progress id="progressBar" value="0" max="100" style="width:300px;"></progress>
                <span id="status"></span>
                <h1 id="finalMsg"></h1>
                <p id ="loaded_n_total"></p>
            </div>
		}

















***********************************************************************************************************
document.body.offsetWidth and document.body.offsetHeight

*****************************************************************
function alertSize() {
  var myWidth = 0, myHeight = 0;
  if( typeof( window.innerWidth ) == 'number' ) {
    //Non-IE
    myWidth = window.innerWidth;
    myHeight = window.innerHeight;
  } else if( document.documentElement && ( document.documentElement.clientWidth || document.documentElement.clientHeight ) ) {
    //IE 6+ in 'standards compliant mode'
    myWidth = document.documentElement.clientWidth;
    myHeight = document.documentElement.clientHeight;
  } else if( document.body && ( document.body.clientWidth || document.body.clientHeight ) ) {
    //IE 4 compatible
    myWidth = document.body.clientWidth;
    myHeight = document.body.clientHeight;
  }
  window.alert( 'Width = ' + myWidth );
  window.alert( 'Height = ' + myHeight );



*****************************************************************

browser : {
		IE : !!(window.attachEvent && navigator.userAgent.indexOf('Opera') === -1),
		Opera : navigator.userAgent.indexOf('Opera') > -1,
		WebKit : navigator.userAgent.indexOf('AppleWebKit/') > -1,
		Gecko : navigator.userAgent.indexOf('Gecko') > -1
				&& navigator.userAgent.indexOf('KHTML') === -1,

		getViewHgt : function(){
			return browser.IE ?
					// IE Cases
					// Test for IE 5-7 Quirks and IE 4
					(!(document.documentElement.clientHeight)
					|| (document.documentElement.clientHeight === 0)) ?
					// IE 5-7 Quirks and IE 4 case
					document.body.clientHeight :
					//IE 6+ Strict Case
					document.documentElement.clientHeight:
					// Gecko and Other DOM compliant case
					window.innerHeight;
		},

		getViewWdth : function(){
			return browser.IE ?
					// IE Cases
					// Test for IE 5-7 Quirks and IE 4
					(!(document.documentElement.clientWidth)
					|| (document.documentElement.clientWidth === 0)) ?
					// IE 5-7 Quirks and IE 4 case
					document.body.clientWidth :
					//IE 6+ Strict Case
					document.documentElement.clientWidth:
					// Gecko and Other DOM compliant case
					window.innerWidth;
		}

*******************************************************************************

function windowResize() {
 var width= document.getElementById("resizeDiv").offsetWidth ;
 var height= document.getElementById("resizeDiv").offsetHeight ;
 alert(height); window.resizeTo(width+20,height+100);
}

var theDialog = $(".mydialog").dialog({
        autoOpen: false,
        resizable: false,
        modal: true,
        width:'auto'
});
******************************************************************************************


 public Result upload() {

        MultipartFormData<File> body = request().body().asMultipartFormData();
        FilePart<File> picture = body.getFile("picture");
        if (picture != null) {
            String fileName = picture.getFilename();
            String[] baseName = fileName.split("\\.(?=[^\\.]+$)");
            String contentType = picture.getContentType();
            //Map<String, String[]> values = request().body().asFormUrlEncoded();
            //JsonNode json = request().body().asJson().get("id");
          //  String dynamicFolder = json.textValue();
           // String dynamicFolder = "tee";
           // Logger.logMsg(dynamicFolder);
            File inputStream = picture.getFile();
         //   String enter = inputStream.getAbsolutePath();
           // String dynamicFolder = receiveData().toString();
            String fullPath = "C:/tmp/";

            if (contentType.equals( "image/png")){
            	try{
            		File newdir = new File(fullPath+fileName);
            		String encodedString = URLEncoder.encode(baseName[0], "UTF-8");
            		String repEncoded = encodedString.replace("+", "_");
            		File modDir = new File(fullPath + repEncoded);
                	newdir.mkdir();
                	Files.copy(inputStream.toPath(), newdir.toPath(), StandardCopyOption.REPLACE_EXISTING);
                	Files.copy(inputStream.toPath(), modDir.toPath(), StandardCopyOption.REPLACE_EXISTING);
            	}catch (Exception e){
                	throw new IllegalStateException(e);
                }
            }
                return ok("File uploaded");
        } else {
            flash("error", "Missing file");
            return badRequest();
        }
    }


*****************************************************************
package javaapplication1;
import java.io.UnsupportedEncodingException;
import java.net.URLEncoder;
/**
 *
 * @author curtis
 */
public class UrlEx {
    /**
     * The main method.
     *
     * @param args the arguments
     */
    public static void main(String[] args) {
        try {
            String string = "The string ?foo-bar";
            String encodedString = URLEncoder.encode(string, "UTF-8");
            String modi = encodedString.replace("+","_");

            System.out.println("Encoded String: " + modi);

        } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
        }
    }
}


public class UrlEx {
    /**
     * The main method.
     *
     * @param args the arguments
     */
    public static void main(String[] args) {
        try {
            File file = new File("???.ppt");
            String fileName = file.getName();
            String string = "The string ?foo-bar";
            //string.replaceAll(" ", "_");
            String encodedString = URLEncoder.encode(fileName, "UTF-8");
            String modi = encodedString.replace("+","_");
            String[] baseName = fileName.split("\\.(?=[^\\.]+$)");
            System.out.println("Encoded String: " + modi);
            System.out.println("File Name: " + fileName);
            System.out.println("Base Name: " + baseName[0]);
        } catch (UnsupportedEncodingException e) {
                e.printStackTrace();
        }
    }
}




+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package javaapplication1;

//import gvjava.org.json.JSONArray;
import gvjava.org.json.JSONException;
import gvjava.org.json.JSONObject;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.LinkedHashSet;
import java.util.List;
import org.json.simple.JSONArray;

/**
 *
 * @author curtis
 */
public class JavaApplication1 {

    /**
     * @param args the command line arguments
     * @throws gvjava.org.json.JSONException
     */
    public static void main(String[] args) throws JSONException {
        // TODO code application logic here
        List<JSONObject> list = new ArrayList<>();
        LinkedHashSet<JSONObject> lhasset = new LinkedHashSet();
        JSONArray arr = new JSONArray();
        HashMap<String, JSONObject> map = new HashMap<>();
        JSONObject first = new JSONObject();
        first.put("id", "floorId");
        first.put("parent", "#");
        first.put("text", "Step");
        first.put("state", "{opened:true}");
        map.put("first" , first);
        lhasset.add(map.get("first"));
        for(int i=1; i< 97; i++){
            JSONObject json = new JSONObject();
            if( i == 1 ){
                json.put("id", i);
                json.put("parent", "floorId");
                json.put("text", "All Steps");
                json.put("state", "{opened:false}");
                map.put("json" + i, json);
            }else{
                json.put("id", i);
                json.put("parent", "floorId");
                json.put("text", i);
                json.put("state", "{opened:false}");
                map.put("json" + i, json);
            }
            lhasset.add(map.get("json" + i));
        }
        System.out.println("the json string is: " + lhasset.toString());
    }
}





+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++

@*
 * This template takes a single argument, a String containing a
 * message to display.
 *@

@(name: String, what: String, age: Int)
@import helper._
@*
 * Call the `main` template with two arguments. The first
 * argument is a `String` with the title of the page, the second
 * argument is an `Html` object containing the body of the page.
 *@
<!DOCTYPE html>
<html lang="en">
    <head>
        <link rel="stylesheet" media="screen" href="@routes.Assets.versioned("stylesheets/main.css")">
        <link rel="shortcut icon" type="image/png" href="@routes.Assets.versioned("images/favicon.png")">
        <script src="@routes.Assets.versioned("javascripts/hello.js")" type="text/javascript"></script>
    	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    	<script type="text/javascript">
		var d = { 'id': "32" };
		//$('#submit').click(function(){
		function sendData(){
	        $.ajax({
	            type :  "POST",
	            dataType: 'json',
	            processData: false,
	            contentType: false,///"application/json; charset=utf-8",
	            data: JSON.stringify(d),
	            url  :  "@routes.HomeController.upload()",
	                success: function(data){
	                    console.log(data);
	                }
	        });
    	}

		function receiveData(){
	        $.ajax({
	            type :  "POST",
	            dataType: 'json',
	            processData: false,

	            contentType: false,//"application/json; charset=utf-8",
	            data: JSON.stringify(d),
	            url  :  "@routes.HomeController.receiveData()",
	                success: function(data){
	                    console.log(data);
	                }
	        });
    	}

		function receiveDataDB(){
			datas = {'name': "great",	'comment': "meat"};
	        $.ajax({
	            type :  "POST",
	            dataType: 'json',
	            contentType: "application/json; charset=utf-8",
	            data: JSON.stringify(datas),
	            url  :  "@routes.HomeController.receiveDataDB()",
                success: function(data){
                	console.log(data);
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    console.log(xhr.status);
                    console.log(xhr.responseText);
                    console.log(thrownError);
                }
	        });
    	}
		//});
		var count = 1;
		function prevButton(){
		    var prevSrc = $("#slide").attr("src").replace("1", count);
            while (count < 4){
                count = count + 1;
            }
            if (count == 4){
                count = 1;
            }
            $("#slide").attr("src", prevSrc);
        }

        function nextButton(){
            var newSrc = $("#slide").attr("src").replace("1", count);
            while (count !== 0){
                count = count - 1;
            }
            if (count == 0){
                count = 3;
            }
            $("#slide").attr("src", newSrc);
        }

		</script>
    </head>
    <body>
		@main("Welcome to Play") {

		    @*
		     * Get an `Html` object by calling the built-in Play welcome
		     * template and passing a `String` message.
		     *@
		    <h1>Hello</h1>
		    <div style="margin-bottom:20px;">
		    Hello <b>@name</b> you are learning <b>@what</b> at <b>@age</b> years
		    </div>
		    @form(action = routes.HomeController.upload, 'enctype -> "multipart/form-data") {

		    <input type="file" name="picture" >
			    <p>
			        <input type="submit" id="submit" onclick="sendData();"/>
			    </p>
			}
			<input id="submit" onclick="receiveData();" type="button" name="sendData" value ="send"/>
			<br>
			<input id="submit" onclick="receiveDataDB();" type="button" name="receive" value ="receive data db"/>
		}
		<div>
		<img id="slide" src="@routes.Assets.at("image_1.png")" width="480" height="480" />
		<button onclick="prevButton();" type="buttton" name="left">Previous</button>
		<button onclick="nextButton();" type="buttton" name="right">Next</button>
		</div>
	</body>
</html>






public Result receiveDataDB(){
    	JsonNode json = request().body().asJson();
    	String name = json.get("name").textValue();
    	String comment = json.get("comment").textValue();

    	return ok("success:" + name + comment);
    }


function receiveDataDB(){
			datas = {'name': "great",	'comment': "meat"};
	        $.ajax({
	            type :  "POST",
	            dataType: 'json',
	            contentType: "application/json; charset=utf-8",
	            data: JSON.stringify(datas),
	            url  :  "@routes.HomeController.receiveDataDB()",
                success: function(data){
                	console.log(data);
                },
                error: function (xhr, ajaxOptions, thrownError) {
                    console.log(xhr.status);
                    console.log(xhr.responseText);
                    console.log(thrownError);
                }
	        });
    	}
==============================================================================






*******************************************************************************
<div>
  Select a text file:
  <input type="file" id="fileInput">
</div>
<pre id="fileDisplayArea"></pre>

*******************************************************************************
var fileInput = $('#fileInput');
	var fileDisplayArea = $('#fileDisplayArea');

	fileInput.change(function(e){
		var file = fileInput[0].files[0];
		var allowedFiles = [".csv"];
		var regex = new RegExp("([a-zA-Z0-9\s_\\.\-:])+(" + allowedFiles.join('|') + ")$");
		if (regex.test(fileInput.val().toLowerCase())) {
			var reader = new FileReader();
			reader.readAsText(file);
			reader.onload = function(e){
				var csvData = e.target.result;
				data = $.csv.toArrays(csvData);
				if (data && data.length > 0) {
					fileDisplayArea.html(data);
				}else{
					fileDisplayArea.html("File Empty!");
				}
			}
		}else{
			fileDisplayArea.html("File Not Supported!");
		}
	});

*******************************************************************************



<input type="file" name="filename" id="filename">
    <div id="csvimporthint"></div>


$("#filename").change(function(e) {
var ext = $("input#filename").val().split(".").pop().toLowerCase();

if($.inArray(ext, ["csv"]) == -1) {
alert('Upload CSV');
return false;
}

if (e.target.files != undefined) {
var reader = new FileReader();
reader.onload = function(e) {
var csvval=e.target.result.split("\n");
var csvvalue=csvval[0].split(",");
var inputrad="";
for(var i=0;i<csvvalue.length;i++)
{
var temp=csvvalue[i];
var inputrad=inputrad+" "+temp;
}
$("#csvimporthint").html(inputrad);
$("#csvimporthinttitle").show();
};
reader.readAsText(e.target.files.item(0));

}

return false;

});





<?php
class Controller_Posts extends Controller_Template
{
	public function action_index()
	{
		$posts = Model_Post::find('all');

		$data = array('posts' => $posts);
      $this->template->title = 'Blog Posts';
      $this->template->content = View::forge('posts/index', $data, false);
	}

	public function action_add()
	{
		 if(Input::post('send')){
		 	$post = new Model_Post();
		 	$post->title = Input::post('title');
		 	$post->category = Input::post('category');
		 	$post->body = Input::post('body');
		 	$post->tags = Input::post('tags');
		 	$post->create_date = date('Y-m-d H:i:s');

		 	$post->save();

		 	Session::set_flash('success', 'Post Added');

		 	Response::redirect('/');
		 }
		 $data = array();
       $this->template->title = 'Add Posts';
       $this->template->content = View::forge('posts/add', $data);
	}

	public function action_view($id)
	{
		 $post = Model_Post::find('first', array(
		 	'where' => array(
		 		'id' => $id
		 	)
		 ));

		 $data = array('post' => $post);
       $this->template->title = $post->title;
       $this->template->content = View::forge('posts/view', $data, false);
	}

	public function action_edit($id)
	{

		  if(Input::post('send')){
		 	$post = Model_Post::find(Input::post('post_id'));
		 	$post->title = Input::post('title');
		 	$post->category = Input::post('category');
		 	$post->body = Input::post('body');
		 	$post->tags = Input::post('tags');
		 	$post->create_date = date('Y-m-d H:i:s');

		 	$post->save();

		 	Session::set_flash('success', 'Post Updated');

		 	Response::redirect('/');
		 }

		 $post = Model_Post::find('first', array(
		 	'where' => array(
		 		'id' => $id
		 	)
		 ));

		 $data = array('post' => $post);
       $this->template->title = 'Edit Post';
       $this->template->content = View::forge('posts/edit', $data, false);
	}

		public function action_delete($id)
	   {
		 $post = Model_Post::find($id);
		 $post->delete();

		 Session::set_flash('success', 'Post Deleted');

		 Response::redirect('/');
	   }

	   public function action_calendar()
	   {
		 //$post = Model_Post::find('all');
		 return View::forge('posts/calendar');
		 //$data = array('post' => $post);
      // $this->template->title = 'Calendar';
      // $this->template->content = View::forge('posts/calendar');
	}

}
</xmp></div>
<div>
<xmp>
Model
<?php
class Model_Post extends orm\Model{
	protected static $_properties = array(
		'id',
		'title',
		'category',
		'body',
		'tags',
		'create_date'
	);
}


<h1>index.php</h1>
<?php foreach($posts as $post) : ?>
<div class="blog-post">
   <h2 class="blog-post-title"><?php echo $post->title; ?></h2>
   <p class="blog-post-meta"><?php echo $post->create_date; ?></p>



   <?php echo Str::truncate($post->body, 200); ?><br/>
   <a class="btn btn-default" href="/posts/view/<?php echo $post->id; ?>">View more</a>
</div><!-- /.blog-post -->
<?php endforeach; ?>


edit.php

<?php echo Form::open('posts/edit/<?php echo $post->id; ?>'); ?>
<div class="form-group">
	<?php echo Form::label('Title', 'title'); ?>
	<?php echo Form::input('title', Input::post('title', isset($post) ? $post->title : ''), array('class' => 'form-control')); ?>
</div>

<div class="form-group">
	<?php echo Form::label('Category', 'category'); ?>
	<?php echo Form::select('category', $post->category, array(
		'0' => 'select Category',
		'Web Design' => 'Web Design',
		'Programming' => 'Programming',
		'Graphic Design' => 'Graphic Design'
	), array('class' => 'form-control')); ?>
</div>

<div class="form-group">
	<?php echo Form::label('Body', 'body'); ?>
	<?php echo Form::textarea('body', Input::post('body', isset($post) ? $post->body : ''), array('class' => 'form-control')); ?>
</div>

<div class="form-group">
	<?php echo Form::label('Tags', 'tags'); ?>
	<?php echo Form::input('tags', Input::post('tags', isset($post) ? $post->tags : ''), array('class' => 'form-control')); ?>
</div>

<input type="hidden" name="post_id" value="<?php echo $post->id; ?>">

<div class="actions">
<?php echo Form::submit('send'); ?>

</div>

<?php echo Form::close(); ?>




<h1>add.php</h1>

<?php echo Form::open('posts/add'); ?>
<div class="form-group">
	<?php echo Form::label('Title', 'title'); ?>
	<?php echo Form::input('title', Input::post('title', isset($post) ? $post->title : ''), array('class' => 'form-control')); ?>
</div>

<div class="form-group">
	<?php echo Form::label('Category', 'category'); ?>
	<?php echo Form::select('category', '0', array(
		'0' => 'select Category',
		'Web Design' => 'Web Design',
		'Programming' => 'Programming',
		'Graphic Design' => 'Graphic Design'
	), array('class' => 'form-control')); ?>
</div>

<div class="form-group">
	<?php echo Form::label('Body', 'body'); ?>
	<?php echo Form::textarea('body', Input::post('body', isset($post) ? $post->body : ''), array('class' => 'form-control')); ?>
</div>

<div class="form-group">
	<?php echo Form::label('Tags', 'tags'); ?>
	<?php echo Form::input('tags', Input::post('tags', isset($post) ? $post->tags : ''), array('class' => 'form-control')); ?>
</div>

<div class="actions">
<?php echo Form::submit('send'); ?>

</div>

<?php echo Form::close(); ?>





<h1>Comments </h1>

<?php echo Form::open('comments/index/<?php echo $comments->id; ?>'); ?>
<?php foreach($comments as $comment) : ?>
<?php $array[] = $comment->title; ?>
<?php endforeach; ?>
<div class="form-group">
	<?php echo Form::label('Category', 'category'); ?>
	<?php echo Form::select('category', $comment->title, array(
		'0' => 'select Category',
		'title' => $array
	), array('class' => 'form-control')); ?>
</div>

<?php echo Form::submit('send'); ?>

<input type="hidden" name="comment_id" value="<?php echo $comment->id; ?>">

<div class="actions">


</div>

<?php echo Form::close(); ?>




<?php
class Controller_Comments extends Controller_Template
{
	public function action_index()
	{
		$comments = Model_Post::find('all');

		$data = array('comments' => $comments,
		);
      $this->template->title = 'Blog Comments';
      $this->template->content = View::forge('comments/index', $data, false);
	}
}




<h1>view</h1>

<?php echo Form::open('comments/index/<?php echo $comments->id; ?>'); ?>
<?php foreach($comments as $comment) : ?>
<?php $array[] = $comment->title; ?>
<?php endforeach; ?>
<div class="form-group">
	<?php echo Form::label('Category', 'category'); ?>
	<?php echo Form::select('category', $comment->title, array(
		'0' => 'select Category',
		'title' => $array
	), array('class' => 'form-control')); ?>
</div>

<?php echo Form::submit('send'); ?>

<input type="hidden" name="comment_id" value="<?php echo $comment->id; ?>">

<div class="actions">


</div>

<?php echo Form::close(); ?>


</xmp>
</div>


</body>


</html>
