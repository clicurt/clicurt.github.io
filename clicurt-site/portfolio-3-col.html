<!DOCTYPE html>
<html lang="en">

<body>

<a href ="http://fuelphp.com/forums/discussion/6709">fuel link</a>

<xmp>
        
mysql  Ver 14.14 Distrib 5.7.12, for Linux (x86_64) using  EditLine wrapper
     
        
   SET @@group_concat_max_len = 5000;
        SET @sql = NULL;
        SELECT GROUP_CONCAT(DISTINCT 
        CONCAT('MAX(IF(num = ', num, ', date, '''')) AS ', 
        CONCAT('`day', num, '`'))) INTO @sql FROM testx;
        SET @sql = CONCAT('SELECT testx.id, ', @sql, ' FROM testx JOIN textd ON testx.id = textd.id GROUP BY id');
        PREPARE stmt FROM @sql;
        EXECUTE stmt;
        DEALLOCATE PREPARE stmt;     
        
        
        
        
        
        
mysql> SELECT
    ->   GROUP_CONCAT(DISTINCT
    ->     CONCAT(
    ->       'MAX(IF(`num` = ', `num`, ',date,NULL)) AS day', `num`)
    ->   ) INTO @sql
    -> FROM testx;
Query OK, 1 row affected (0.12 sec)

mysql> 
mysql> SET @sql = CONCAT('SELECT id, ', @sql, ' 
    '>                   FROM testx
    '>                   GROUP BY id');
Query OK, 0 rows affected (0.00 sec)

mysql> 
mysql> PREPARE stmt FROM @sql;
Query OK, 0 rows affected (0.00 sec)
Statement prepared

mysql> EXECUTE stmt;
+------+------------+------------+------------+------------+------------+------------+
| id   | day1       | day2       | day3       | day4       | day5       | day6       |
+------+------------+------------+------------+------------+------------+------------+
| 1000 | 2016-07-01 | 2016-07-02 | 2016-07-09 | NULL       | NULL       | NULL       |
| 2000 | NULL       | NULL       | NULL       | 2016-07-13 | 2016-07-06 | 2016-07-20 |
+------+------------+------------+------------+------------+------------+------------+
2 rows in set (0.00 sec)

mysql> DEALLOCATE PREPARE stmt;
Query OK, 0 rows affected (0.00 sec)

mysql> 

        
        
        
        
<?php
class Controller_Comments extends Controller_Template
{
	public function action_index()
	{
		$comments = Model_Post::find('all'); 
		
		$data = array('comments' => $comments,
		);
      $this->template->title = 'Blog Comments';
      $this->template->content = View::forge('comments/index', $data, false);
	}
}



VIEW FILE

<?php echo Form::open('comments/index/<?php echo $comments->id; ?>'); ?>
<?php foreach($comments as $comment) : ?>
<?php $array[] = $comment->title; ?>
<?php endforeach; ?> 
<div class="form-group">
	<?php echo Form::label('Category', 'category'); ?>
	<?php echo Form::select('category', $comment->title, array(
		'0' => 'select Category',
		'title' => $array
	), array('class' => 'form-control')); ?>
</div>

<?php echo Form::submit('send'); ?>

<input type="hidden" name="comment_id" value="<?php echo $comment->id; ?>">

<div class="actions">

	
</div>

<?php echo Form::close(); ?>


ALTERNATE OPTIONS

<?php foreach($comments as $comment) : ?>
<?php $array[] = array($comment->title, $comment->create_date, $comment->tags); ?>
<?php endforeach; ?> 
<div class="form-group">
	<?php echo Form::label('Category', 'category'); ?>
	<?php echo Form::select('category', $comment->title, array(
		'0' => 'select Category',
		'title' => $array
	), array('class' => 'form-control')); ?>
</div>






<?php echo Asset::js('jquery-3.0.0.js'); ?>


<h1>Comments </h1>

<?php echo Form::open('comments/index/<?php echo $comments->id; ?>'); ?>
<?php foreach($comments as $comment) : ?>
<?php $array[] = array($comment->title, $comment->create_date, $comment->tags); ?>
<?php endforeach; ?> 
<div class="form-group">
	<?php echo Form::label('Category', 'category'); ?>
	<?php echo Form::select('category', $comment->title, array(
		'0' => 'select Category',
		'title' => $array
	), array('class' => 'form-control')); ?>
</div>

<?php echo Form::submit('send'); ?>

<input type="hidden" name="comment_id" value="<?php echo $comment->id; ?>">

<div class="actions">

	
</div>

<?php echo Form::close(); ?>
<br/>
<style>
table, th, td {
    border: 1px solid black;
}
</style>

<body>

<table id="timeTable" style="width:500px; text-align:center; padding:20px">
<?php for($i=1; $i<=2;++$i){; ?>
<tbody>
  <tr class="tRow" style="padding:50px; width: 500px">
    <td> <?= $i; ?></td>
    <td><input class="timeInput" id="hourStart" type="time" name="time" style="width: 120px"> 
    <input class="timeInput" id="hourEnd" type= "time" name= "time" style="width: 120px" >
    </td>
    <td><input class="sumCell" type="text" style="width: 200px" ></td>
  </tr>
  </tbody>
<?php };?>
<tfoot>
<tr>
   <td colspan ="2">Total Hours:</td>
   <td id="val"><input class="totalSum" type="text" style="width: 200px" ></td>
</tr>
</tfoot>
</table>
<br/><button id="ans">CLICK</button>

</body>
<script>
//for(i=0;i<10;++i){
/*
var table = document.getElementById("timeTable");
for (var i = 0, row; row = table.rows[i]; i++) {
   //iterate through rows
   //rows would be accessed using the "row" variable assigned in the for loop
   for (var j = 0, col; col = row.cells[j]; j++) {
     //iterate through columns
     //columns would be accessed using the "col" variable assigned in the for loop
   }  
}*/


     //iterate through cells
     //cells would be accessed using the "cell" variable assigned in the for loop

	
$(document).ready(function(){
	$(".timeInput").keyup(function() {
			changes();
	});
}); 


//}
function changes(){
   	$('.tRow').each(function(){
		var startTime = $('#hourStart').val();
		var	endTime = $('#hourEnd').val();
		var	hours = 0;
		var	minutes = 0;
	
		$(this).find('.timeInput').each(function(){
				hours = endTime.split(':')[0] - startTime.split(':')[0];
				minutes = endTime.split(':')[1] - startTime.split(':')[1];
	
			if(this.value.length!=0) {
				minutes = minutes.toString().length < 2 ? '0' + minutes:minutes;
				if(minutes < 0){ 
					hours--;
					minutes = 60 + minutes;
				}
				if((minutes >= 0)&&(minutes <= 14)){
					minutes = 0;
				}else if((minutes >= 15)&&(minutes <= 29)){
					minutes = 15;
				}else if((minutes >= 30)&&(minutes <= 44)){
					minutes = 30;
				}else if((minutes >= 45)&&(minutes <= 59)){
					minutes = 45;
				}
				
				hours = hours.toString().length < 2 ? '0' + hours:hours;
			}
		});
		
		$('.sumCell', this).val(hours + ':' + minutes);
    });
}
</script>

<script>
	$(document).ready(function(){
		$(".timeInput").keyup(function() {
			$(this).keyup(function(){
				calculateSum();
			});
		});
	});

	function calculateSum() {
		var sum1 = 0;
		var sum2 = 0;
		//iterate through each textboxes and add the values
		$(".sumCell").each(function() {
			//add only if the value is number
			if(this.value.length!=0) {
				var arr = (this.value).split(':');
				sum1 += parseInt(arr[0]);
				sum2 += parseInt(arr[1]);
				while((sum2 - 60)> 0){
					sum1++;
					sum2 %= 60;
				}
			}
		});
		$(".totalSum").val(sum1 + ':' + sum2);
	}
</script>




SET @@group_concat_max_len = 5000;
SET @sql = NULL;
SELECT GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(hw_id = ', hw_id, ', score, -1)) AS ', CONCAT('`hw', hw_id, '`'))) INTO @sql FROM mk;
SET @sql = CONCAT('SELECT st.id, ', @sql, ' FROM st LEFT JOIN mk ON st.id = mk.st_id GROUP BY st.id');
PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;


<?php
foreach($result as $row){
	$array = $row['usedate'];
if($row['myCode'] !== null && $row['usedate'] !== '' && $row['FirstName'] !== '')	
print_r($array[2]);
?>
<table style="border: 1px solid black; padding:0px">
  <tr>
    <th>myCode</th>
    <th>First name</th>
    <th>Date 1</th>
	<th>Date 2</th>
	<th>Date 3</th>
  </tr>
  <tr>
    <td>
	<?php
	if($row['myCode'] > 0){
		echo $row['myCode'] ;
	}else{
		echo '';
	}
	?>
	
	</td>
	 <td>
	<?php
	if($row['myCode'] > 0){
		echo $row['FirstName'] ;
	}else{
		echo '';
	}
	?>
	
	</td>
	
    <td>
	<?php
	if($row['myCode'] > 0){
		echo $array[0] ;
	}else{
		echo '';
	}
	?>
	</td>
	
    <td>
	<?php
	if($row['usedate'] > 0){
		echo $array[1] ;
	}else{
		echo '';
	}
	?>
	</td>
	 <td>
	<?php
	if($row['usedate'] > 0){
		echo $array[2] ;
	}else{
		echo '';
	}
	?>
	</td>
  </tr>
</table>
<?php }
?>



	SELECT
		  testx.seqno
		  , testx.myCode
		  , testx.usedate 
		  , textd.FirstName
		FROM
		  myblog.testx 
		  JOIN 
		  myblog.textd
		  ON testx.myCode = textd.myCode
		GROUP BY myCode;
		ORDER BY testx.seqno



</xmp>

</body>

</html>
